dm.globalComponentFactory("loadingBar",function(a){var b=!1,c=function(){d(),i()},d=function(){0===a("#loading-bar").length&&a("body").append('<div id="loading-bar" class="" style=""><div class="bar" style="width:0%; display: none;"><div class="peg"></div></div></div><div id="loading-bar-spinner" class="" style="display: none;"><div class="spinner-icon"></div></div>')},e=function(){a("#loading-bar .bar").show(),a("#loading-bar-spinner").show()},f=function(){setTimeout(function(){a("#loading-bar .bar").hide().css("width","0px"),a("#loading-bar-spinner").hide()},350)},g=function(b){a("#loading-bar .bar").css("width",b+"%"),this.currentPercent=b},h=function(){return this.currentPercent},i=function(){a(document).on("dm-ajax-start",function(a,c){if(c){b=!0,setTimeout(function(){b&&(e(),g(1))},350);var d=setInterval(function(){if(b){var a=h()+(Math.floor(20*Math.random())+1);g(a>95?95:a)}else clearInterval(d)},350)}}),a(document).on("dm-ajax-stop",function(a,c,d,e){console.log(arguments),b=!1,g(100),f()})};return a(function(){c()}),{show:e,hide:f,setPercent:g,getPercent:h,bindEvents:i}},null,[jQuery]);